/*!
 LZ-UTF8 v0.4.0

 Copyright (c) 2017, Rotem Dan
 Released under the MIT license.

 Build date: 2017-02-27 

 Please report any issues at https://github.com/rotemdan/lzutf8.js/issues
*/
var LZUTF8;!function(a){a.runningInNodeJS=function(){return"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node},a.runningInMainNodeJSModule=function(){return a.runningInNodeJS()&&require.main===module},a.commonJSAvailable=function(){return"object"==typeof module&&"object"==typeof module.exports},a.runningInWebWorker=function(){return"undefined"==typeof window&&"object"==typeof self&&"function"==typeof self.addEventListener&&"function"==typeof self.close},a.runningInNodeChildProcess=function(){return a.runningInNodeJS()&&"function"==typeof process.send},a.runningInNullOrigin=function(){return"object"==typeof window&&"object"==typeof window.location&&("http:"!==document.location.protocol&&"https:"!==document.location.protocol)},a.webWorkersAvailable=function(){return"function"==typeof Worker&&!a.runningInNullOrigin()&&(!a.runningInNodeJS()&&!(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0))},a.webSocketsAvailable=function(){return"function"==typeof WebSocket},a.log=function(a,b){void 0===b&&(b=!1),"object"==typeof console&&(console.log(a),b&&"object"==typeof document&&(document.body.innerHTML+=a+"<br/>"))},a.createErrorMessage=function(b,c){if(void 0===c&&(c="Unhandled exception"),null==b)return c;if(c+=": ","object"==typeof b.content){if(a.runningInNodeJS())return c+b.content.stack;var d=JSON.stringify(b.content);return"{}"!==d?c+d:c+b.content}return"string"==typeof b.content?c+b.content:c+b},a.printExceptionAndStackTraceToConsole=function(b,c){void 0===c&&(c="Unhandled exception"),a.log(a.createErrorMessage(b,c))},a.getGlobalObject=function(){return"object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:{}},a.toString=Object.prototype.toString,a.commonJSAvailable()&&(module.exports=a)}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(){}return b.compressAsync=function(b,c,d){var e=new a.Timer,f=new a.Compressor;if(!d)throw new TypeError("compressAsync: No callback argument given");if("string"==typeof b)b=a.encodeUTF8(b);else if(null==b||!(b instanceof Uint8Array))return void d(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));var g=a.ArrayTools.splitByteArray(b,c.blockSize),h=[],i=function(b){if(b<g.length){var j=void 0;try{j=f.compressBlock(g[b])}catch(a){return void d(void 0,a)}h.push(j),e.getElapsedTime()<=20?i(b+1):(a.enqueueImmediate(function(){return i(b+1)}),e.restart())}else{var k=a.ArrayTools.concatUint8Arrays(h);a.enqueueImmediate(function(){var b;try{b=a.CompressionCommon.encodeCompressedBytes(k,c.outputEncoding)}catch(a){return void d(void 0,a)}a.enqueueImmediate(function(){return d(b)})})}};a.enqueueImmediate(function(){return i(0)})},b.createCompressionStream=function(){var b=new a.Compressor,c=require("stream"),d=new c.Transform({decodeStrings:!0,highWaterMark:65536});return d._transform=function(c,e,f){var g;try{g=a.BufferTools.uint8ArrayToBuffer(b.compressBlock(a.BufferTools.bufferToUint8Array(c)))}catch(a){return void d.emit("error",a)}d.push(g),f()},d},b}();a.AsyncCompressor=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(){}return b.decompressAsync=function(b,c,d){if(!d)throw new TypeError("decompressAsync: No callback argument given");var e=new a.Timer;try{b=a.CompressionCommon.decodeCompressedBytes(b,c.inputEncoding)}catch(a){return void d(void 0,a)}var f=new a.Decompressor,g=a.ArrayTools.splitByteArray(b,c.blockSize),h=[],i=function(b){if(b<g.length){var j=void 0;try{j=f.decompressBlock(g[b])}catch(a){return void d(void 0,a)}h.push(j),e.getElapsedTime()<=20?i(b+1):(a.enqueueImmediate(function(){return i(b+1)}),e.restart())}else{var k=a.ArrayTools.concatUint8Arrays(h);a.enqueueImmediate(function(){var b;try{b=a.CompressionCommon.encodeDecompressedBytes(k,c.outputEncoding)}catch(a){return void d(void 0,a)}a.enqueueImmediate(function(){return d(b)})})}};a.enqueueImmediate(function(){return i(0)})},b.createDecompressionStream=function(){var b=new a.Decompressor,c=require("stream"),d=new c.Transform({decodeStrings:!0,highWaterMark:65536});return d._transform=function(c,e,f){var g;try{g=a.BufferTools.uint8ArrayToBuffer(b.decompressBlock(a.BufferTools.bufferToUint8Array(c)))}catch(a){return void d.emit("error",a)}d.push(g),f()},d},b}();a.AsyncDecompressor=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(b){b.compressAsync=function(a,c,d){if("ByteArray"==c.inputEncoding&&!(a instanceof Uint8Array))return void d(void 0,new TypeError("compressAsync: input is not a Uint8Array"));var e={token:Math.random().toString(),type:"compress",data:a,inputEncoding:c.inputEncoding,outputEncoding:c.outputEncoding},f=function(a){var c=a.data;c&&c.token==e.token&&(b.globalWorker.removeEventListener("message",f),"error"==c.type?d(void 0,new Error(c.error)):d(c.data))};b.globalWorker.addEventListener("message",f),b.globalWorker.postMessage(e,[])},b.decompressAsync=function(a,c,d){var e={token:Math.random().toString(),type:"decompress",data:a,inputEncoding:c.inputEncoding,outputEncoding:c.outputEncoding},f=function(a){var c=a.data;c&&c.token==e.token&&(b.globalWorker.removeEventListener("message",f),"error"==c.type?d(void 0,new Error(c.error)):d(c.data))};b.globalWorker.addEventListener("message",f),b.globalWorker.postMessage(e,[])},b.installWebWorkerIfNeeded=function(){"object"==typeof self&&void 0===self.document&&void 0!=self.addEventListener&&(self.addEventListener("message",function(b){var c=b.data;if("compress"==c.type){var d=void 0;try{d=a.compress(c.data,{outputEncoding:c.outputEncoding})}catch(b){return void self.postMessage({token:c.token,type:"error",error:a.createErrorMessage(b)},[])}var e={token:c.token,type:"compressionResult",data:d,encoding:c.outputEncoding};e.data instanceof Uint8Array?self.postMessage(e,[e.data.buffer]):self.postMessage(e,[])}else if("decompress"==c.type){var f=void 0;try{f=a.decompress(c.data,{inputEncoding:c.inputEncoding,outputEncoding:c.outputEncoding})}catch(b){return void self.postMessage({token:c.token,type:"error",error:a.createErrorMessage(b)},[])}var e={token:c.token,type:"decompressionResult",data:f,encoding:c.outputEncoding};e.data instanceof Uint8Array?self.postMessage(e,[e.data.buffer]):self.postMessage(e,[])}}),self.addEventListener("error",function(b){a.log(a.createErrorMessage(b.error,"Unexpected LZUTF8 WebWorker exception"))}))},b.createGlobalWorkerIfNeeded=function(){if(b.globalWorker)return!0;if(!a.webWorkersAvailable())return!1;if(!b.scriptURI&&"object"==typeof document){var c=document.getElementById("lzutf8");null!=c&&(b.scriptURI=c.getAttribute("src")||void 0)}return!!b.scriptURI&&(b.globalWorker=new Worker(b.scriptURI),!0)},b.terminate=function(){b.globalWorker&&(b.globalWorker.terminate(),b.globalWorker=void 0)}}(b=a.WebWorker||(a.WebWorker={})),b.installWebWorkerIfNeeded()}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function a(a,b,c){this.container=a,this.startPosition=b,this.length=c}return a.prototype.get=function(a){return this.container[this.startPosition+a]},a.prototype.getInReversedOrder=function(a){return this.container[this.startPosition+this.length-1-a]},a.prototype.set=function(a,b){this.container[this.startPosition+a]=b},a}();a.ArraySegment=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(a){a.copyElements=function(a,b,c,d,e){for(;e--;)c[d++]=a[b++]},a.zeroElements=function(a,b,c){for(;c--;)a[b++]=0},a.countNonzeroValuesInArray=function(a){for(var b=0,c=0;c<a.length;c++)a[c]&&b++;return b},a.truncateStartingElements=function(a,b){if(a.length<=b)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var c=a.length-b,d=0;d<b;d++)a[d]=a[c+d];a.length=b},a.doubleByteArrayCapacity=function(a){var b=new Uint8Array(2*a.length);return b.set(a),b},a.concatUint8Arrays=function(a){for(var b=0,c=0,d=a;c<d.length;c++){var e=d[c];b+=e.length}for(var f=new Uint8Array(b),g=0,h=0,i=a;h<i.length;h++){var e=i[h];f.set(e,g),g+=e.length}return f},a.splitByteArray=function(a,b){for(var c=[],d=0;d<a.length;){var e=Math.min(b,a.length-d);c.push(a.subarray(d,d+e)),d+=e}return c}}(b=a.ArrayTools||(a.ArrayTools={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(a){a.convertToUint8ArrayIfNeeded=function(b){return"function"==typeof Buffer&&Buffer.isBuffer(b)?a.bufferToUint8Array(b):b},a.uint8ArrayToBuffer=function(a){if(Buffer.prototype instanceof Uint8Array){var b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);return Object.setPrototypeOf(b,Buffer.prototype),b}for(var c=a.length,d=new Buffer(c),e=0;e<c;e++)d[e]=a[e];return d},a.bufferToUint8Array=function(a){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(var b=a.length,c=new Uint8Array(b),d=0;d<b;d++)c[d]=a[d];return c}}(b=a.BufferTools||(a.BufferTools={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(b){b.getCroppedBuffer=function(a,b,c,d){void 0===d&&(d=0);var e=new Uint8Array(c+d);return e.set(a.subarray(b,b+c)),e},b.getCroppedAndAppendedByteArray=function(b,c,d,e){return a.ArrayTools.concatUint8Arrays([b.subarray(c,c+d),e])},b.detectCompressionSourceEncoding=function(a){if(null==a)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if("string"==typeof a)return"String";if(a instanceof Uint8Array||"function"==typeof Buffer&&Buffer.isBuffer(a))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},b.encodeCompressedBytes=function(b,c){switch(c){case"ByteArray":return b;case"Buffer":return a.BufferTools.uint8ArrayToBuffer(b);case"Base64":return a.encodeBase64(b);case"BinaryString":return a.encodeBinaryString(b);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},b.decodeCompressedBytes=function(b,c){if(null==c)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(c){case"ByteArray":case"Buffer":var d=a.BufferTools.convertToUint8ArrayIfNeeded(b);if(!(d instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return d;case"Base64":if("string"!=typeof b)throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return a.decodeBase64(b);case"BinaryString":if("string"!=typeof b)throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return a.decodeBinaryString(b);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '"+c+"'")}},b.encodeDecompressedBytes=function(b,c){switch(c){case"String":return a.decodeUTF8(b);case"ByteArray":return b;case"Buffer":if("function"!=typeof Buffer)throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return a.BufferTools.uint8ArrayToBuffer(b);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}}(b=a.CompressionCommon||(a.CompressionCommon={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(b){var c,d=[];b.enqueueImmediate=function(a){d.push(a),1===d.length&&c()},b.initializeScheduler=function(){var b=function(){for(var b=0,c=d;b<c.length;b++){var e=c[b];try{e.call(void 0)}catch(b){a.printExceptionAndStackTraceToConsole(b,"enqueueImmediate exception")}}d.length=0};if(a.runningInNodeJS()&&(c=function(){return setImmediate(function(){return b()})}),"object"==typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.postMessage){var e="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",function(a){a.data===e&&b()});var f;f=a.runningInNullOrigin()?"*":window.location.href,c=function(){return window.postMessage(e,f)}}else if("function"==typeof MessageChannel&&"function"==typeof MessagePort){var g=new MessageChannel;g.port1.onmessage=function(){return b()},c=function(){return g.port2.postMessage(0)}}else c=function(){return setTimeout(function(){return b()},0)}},b.initializeScheduler()}(b=a.EventLoop||(a.EventLoop={})),a.enqueueImmediate=function(a){return b.enqueueImmediate(a)}}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(a){a.override=function(b,c){return a.extend(b,c)},a.extend=function(a,b){if(null==a)throw new TypeError("obj is null or undefined");if("object"!=typeof a)throw new TypeError("obj is not an object");if(null==b&&(b={}),"object"!=typeof b)throw new TypeError("newProperties is not an object");if(null!=b)for(var c in b)a[c]=b[c];return a}}(b=a.ObjectTools||(a.ObjectTools={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){a.getRandomIntegerInRange=function(a,b){return a+Math.floor(Math.random()*(b-a))},a.getRandomUTF16StringOfLength=function(b){for(var c="",d=0;d<b;d++){var e=void 0;do e=a.getRandomIntegerInRange(0,1114112);while(e>=55296&&e<=57343);c+=a.Encoding.CodePoint.decodeToString(e)}return c}}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function a(a){void 0===a&&(a=1024),this.outputBufferCapacity=a,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return a.prototype.appendCharCode=function(a){this.outputBuffer[this.outputPosition++]=a,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},a.prototype.appendCharCodes=function(a){for(var b=0,c=a.length;b<c;b++)this.appendCharCode(a[b])},a.prototype.appendString=function(a){for(var b=0,c=a.length;b<c;b++)this.appendCharCode(a.charCodeAt(b))},a.prototype.appendCodePoint=function(a){if(a<=65535)this.appendCharCode(a);else{if(!(a<=1114111))throw new Error("appendCodePoint: A code point of "+a+" cannot be encoded in UTF-16");this.appendCharCode(55296+(a-65536>>>10)),this.appendCharCode(56320+(a-65536&1023))}},a.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},a.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},a}();a.StringBuilder=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(){this.restart()}return b.prototype.restart=function(){this.startTime=b.getTimestamp()},b.prototype.getElapsedTime=function(){return b.getTimestamp()-this.startTime},b.prototype.getElapsedTimeAndRestart=function(){var a=this.getElapsedTime();return this.restart(),a},b.prototype.logAndRestart=function(b,c){void 0===c&&(c=!0);var d=this.getElapsedTime(),e=b+": "+d.toFixed(3)+"ms";return a.log(e,c),this.restart(),d},b.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},b.getMicrosecondTimestamp=function(){return Math.floor(1e3*b.getTimestamp())},b.createGlobalTimestampFunction=function(){if("object"==typeof process&&"function"==typeof process.hrtime){var a=0;this.timestampFunc=function(){var b=process.hrtime(),c=1e3*b[0]+b[1]/1e6;return a+c},a=Date.now()-this.timestampFunc()}else if("object"==typeof chrome&&chrome.Interval){var b=Date.now(),c=new chrome.Interval;c.start(),this.timestampFunc=function(){return b+c.microseconds()/1e3}}else if("object"==typeof performance&&performance.now){var d=Date.now()-performance.now();this.timestampFunc=function(){return d+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return(new Date).getTime()}},b}();a.Timer=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(b){void 0===b&&(b=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,b&&"function"==typeof Uint32Array?this.prefixHashTable=new a.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new a.CompressorSimpleHashTable(this.PrefixHashTableSize)}return b.prototype.compressBlock=function(b){if(void 0===b||null===b)throw new TypeError("compressBlock: undefined or null input received");return"string"==typeof b&&(b=a.encodeUTF8(b)),b=a.BufferTools.convertToUint8ArrayIfNeeded(b),this.compressUtf8Block(b)},b.prototype.compressUtf8Block=function(a){if(!a||0==a.length)return new Uint8Array(0);var b=this.cropAndAddNewBytesToInputBuffer(a),c=this.inputBuffer,d=this.inputBuffer.length;this.outputBuffer=new Uint8Array(a.length),this.outputBufferPosition=0;for(var e=0,f=b;f<d;f++){var g=c[f],h=f<e;if(f>d-this.MinimumSequenceLength)h||this.outputRawByte(g);else{var i=this.getBucketIndexForPrefix(f);if(!h){var j=this.findLongestMatch(f,i);null!=j&&(this.outputPointerBytes(j.length,j.distance),e=f+j.length,h=!0)}h||this.outputRawByte(g);var k=this.inputBufferStreamOffset+f;this.prefixHashTable.addValueToBucket(i,k)}}return this.outputBuffer.subarray(0,this.outputBufferPosition)},b.prototype.findLongestMatch=function(a,b){var c=this.prefixHashTable.getArraySegmentForBucketIndex(b,this.reusableArraySegmentObject);if(null==c)return null;for(var d,e=this.inputBuffer,f=0,g=0;g<c.length;g++){var h=c.getInReversedOrder(g)-this.inputBufferStreamOffset,i=a-h,j=void 0;if(j=void 0===d?this.MinimumSequenceLength-1:d<128&&i>=128?f+(f>>>1):f,i>this.MaximumMatchDistance||j>=this.MaximumSequenceLength||a+j>=e.length)break;if(e[h+j]===e[a+j])for(var k=0;;k++){if(a+k===e.length||e[h+k]!==e[a+k]){k>j&&(d=i,f=k);break}if(k===this.MaximumSequenceLength)return{distance:i,length:this.MaximumSequenceLength}}}return void 0!==d?{distance:d,length:f}:null},b.prototype.getBucketIndexForPrefix=function(a){return(7880599*this.inputBuffer[a]+39601*this.inputBuffer[a+1]+199*this.inputBuffer[a+2]+this.inputBuffer[a+3])%this.PrefixHashTableSize},b.prototype.outputPointerBytes=function(a,b){b<128?(this.outputRawByte(192|a),this.outputRawByte(b)):(this.outputRawByte(224|a),this.outputRawByte(b>>>8),this.outputRawByte(255&b))},b.prototype.outputRawByte=function(a){this.outputBuffer[this.outputBufferPosition++]=a},b.prototype.cropAndAddNewBytesToInputBuffer=function(b){if(void 0===this.inputBuffer)return this.inputBuffer=b,0;var c=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),d=this.inputBuffer.length-c;return this.inputBuffer=a.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,d,c,b),this.inputBufferStreamOffset+=d,c},b}();a.Compressor=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(a){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(2*a),this.storage=new Uint32Array(2*a),this.storageIndex=1}return b.prototype.addValueToBucket=function(b,c){b<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var d,e=this.bucketLocators[b];if(0===e)e=this.storageIndex,d=1,this.storage[this.storageIndex]=c,this.storageIndex+=this.minimumBucketCapacity;else{d=this.bucketLocators[b+1],d===this.maximumBucketCapacity-1&&(d=this.truncateBucketToNewerElements(e,d,this.maximumBucketCapacity/2));var f=e+d;0===this.storage[f]?(this.storage[f]=c,f===this.storageIndex&&(this.storageIndex+=d)):(a.ArrayTools.copyElements(this.storage,e,this.storage,this.storageIndex,d),e=this.storageIndex,this.storageIndex+=d,this.storage[this.storageIndex++]=c,this.storageIndex+=d),d++}this.bucketLocators[b]=e,this.bucketLocators[b+1]=d},b.prototype.truncateBucketToNewerElements=function(b,c,d){var e=b+c-d;return a.ArrayTools.copyElements(this.storage,e,this.storage,b,d),a.ArrayTools.zeroElements(this.storage,b+d,c-d),d},b.prototype.compact=function(){var b=this.bucketLocators,c=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var d=0;d<b.length;d+=2){var e=b[d+1];0!==e&&(this.bucketLocators[d]=this.storageIndex,this.bucketLocators[d+1]=e,this.storageIndex+=Math.max(Math.min(2*e,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(8*this.storageIndex);for(var d=0;d<b.length;d+=2){var f=b[d];if(0!==f){var g=this.bucketLocators[d],h=this.bucketLocators[d+1];a.ArrayTools.copyElements(c,f,this.storage,g,h)}}},b.prototype.getArraySegmentForBucketIndex=function(b,c){b<<=1;var d=this.bucketLocators[b];return 0===d?null:(void 0===c&&(c=new a.ArraySegment(this.storage,d,this.bucketLocators[b+1])),c)},b.prototype.getUsedBucketCount=function(){return Math.floor(a.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},b.prototype.getTotalElementCount=function(){for(var a=0,b=0;b<this.bucketLocators.length;b+=2)a+=this.bucketLocators[b+1];return a},b}();a.CompressorCustomHashTable=b}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b=function(){function b(a){this.maximumBucketCapacity=64,this.buckets=new Array(a)}return b.prototype.addValueToBucket=function(b,c){var d=this.buckets[b];void 0===d?this.buckets[b]=[c]:(d.length===this.maximumBucketCapacity-1&&a.ArrayTools.truncateStartingElements(d,this.maximumBucketCapacity/2),d.push(c))},b.prototype.getArraySegmentForBucketIndex=function(b,c){var d=this.buckets[b];return void 0===d?null:(void 0===c&&(c=new a.ArraySegment(d,0,d.length)),c)},b.prototype.getUsedBucketCount=function(){return a.ArrayTools.countNonzeroValuesInArray(this.buckets)},b.prototype.getTotalElementCount=function(){for(var a=0,b=0;b<this.buckets.length;b++)void 0!==this.buckets[b]&&(a+=this.buckets[b].length);return a},b}();a.CompressorSimpleHashTable=b}(LZUTF8||(LZUTF8={}));var LZUTF8;if(function(a){var b=function(){function b(){this.MaximumMatchDistance=32767,this.outputPosition=0}return b.prototype.decompressBlockToString=function(b){return b=a.BufferTools.convertToUint8ArrayIfNeeded(b),a.decodeUTF8(this.decompressBlock(b))},b.prototype.decompressBlock=function(b){this.inputBufferRemainder&&(b=a.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,b]),this.inputBufferRemainder=void 0);for(var c=this.cropOutputBufferToWindowAndInitialize(Math.max(4*b.length,1024)),d=0,e=b.length;d<e;d++){var f=b[d];if(f>>>6==3){var g=f>>>5;if(d==e-1||d==e-2&&7==g){this.inputBufferRemainder=b.subarray(d);break}if(b[d+1]>>>7===1)this.outputByte(f);else{var h=31&f,i=void 0;6==g?(i=b[d+1],d+=1):(i=b[d+1]<<8|b[d+2],d+=2);for(var j=this.outputPosition-i,k=0;k<h;k++)this.outputByte(this.outputBuffer[j+k])}}else this.outputByte(f)}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),a.CompressionCommon.getCroppedBuffer(this.outputBuffer,c,this.outputPosition-c)},b.prototype.outputByte=function(b){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=a.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=b},b.prototype.cropOutputBufferToWindowAndInitialize=function(b){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(b),0;var c=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=a.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-c,c,b),this.outputPosition=c,this.outputBufferRemainder){for(var d=0;d<this.outputBufferRemainder.length;d++)this.outputByte(this.outputBufferRemainder[d]);this.outputBufferRemainder=void 0}return c},b.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var a=1;a<=4&&this.outputPosition-a>=0;a++){var b=this.outputBuffer[this.outputPosition-a];if(a<4&&b>>>3===30||a<3&&b>>>4===14||a<2&&b>>>5===6)return this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-a,this.outputPosition),void(this.outputPosition-=a)}},b}();a.Decompressor=b}(LZUTF8||(LZUTF8={})),"function"==typeof Uint8Array&&0!==new Uint8Array(1).subarray(1).byteLength){var subarray=function(a,b){var c=function(a,b,c){return a<b?b:a>c?c:a};a|=0,b|=0,arguments.length<1&&(a=0),arguments.length<2&&(b=this.length),a<0&&(a=this.length+a),b<0&&(b=this.length+b),a=c(a,0,this.length),b=c(b,0,this.length);var d=b-a;return d<0&&(d=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,d)},types=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],globalObject=void 0;if("object"==typeof window?globalObject=window:"object"==typeof self&&(globalObject=self),void 0!==globalObject)for(var i=0;i<types.length;i++)globalObject[types[i]]&&(globalObject[types[i]].prototype.subarray=subarray)}var LZUTF8;!function(a){var b;!function(b){var c;!function(b){var c=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),d=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]),e="=",f=61;b.encode=function(c){return c&&0!=c.length?a.runningInNodeJS()?a.BufferTools.uint8ArrayToBuffer(c).toString("base64"):b.encodeWithJS(c):""},b.decode=function(c){return c?a.runningInNodeJS()?a.BufferTools.bufferToUint8Array(new Buffer(c,"base64")):b.decodeWithJS(c):new Uint8Array(0)},b.encodeWithJS=function(b,d){if(void 0===d&&(d=!0),!b||0==b.length)return"";for(var e,g=c,h=new a.StringBuilder,i=0,j=b.length;i<j;i+=3)i<=j-3?(e=b[i]<<16|b[i+1]<<8|b[i+2],h.appendCharCode(g[e>>>18&63]),h.appendCharCode(g[e>>>12&63]),h.appendCharCode(g[e>>>6&63]),h.appendCharCode(g[63&e]),e=0):i===j-2?(e=b[i]<<16|b[i+1]<<8,h.appendCharCode(g[e>>>18&63]),h.appendCharCode(g[e>>>12&63]),h.appendCharCode(g[e>>>6&63]),d&&h.appendCharCode(f)):i===j-1&&(e=b[i]<<16,h.appendCharCode(g[e>>>18&63]),h.appendCharCode(g[e>>>12&63]),d&&(h.appendCharCode(f),h.appendCharCode(f)));return h.getOutputString()},b.decodeWithJS=function(a,b){if(!a||0==a.length)return new Uint8Array(0);var c=a.length%4;if(1===c)throw new Error("Invalid Base64 string: length % 4 == 1");2===c?a+=e+e:3===c&&(a+=e),b||(b=new Uint8Array(a.length));for(var g=0,h=a.length,i=0;i<h;i+=4){var j=d[a.charCodeAt(i)]<<18|d[a.charCodeAt(i+1)]<<12|d[a.charCodeAt(i+2)]<<6|d[a.charCodeAt(i+3)];b[g++]=j>>>16&255,b[g++]=j>>>8&255,b[g++]=255&j}return a.charCodeAt(h-1)==f&&g--,a.charCodeAt(h-2)==f&&g--,b.subarray(0,g)}}(c=b.Base64||(b.Base64={}))}(b=a.Encoding||(a.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(b){var c;!function(b){b.encode=function(b){if(null==b)throw new TypeError("BinaryString.encode: undefined or null input received");if(0===b.length)return"";for(var c=b.length,d=new a.StringBuilder,e=0,f=1,g=0;g<c;g+=2){var h=void 0;h=g==c-1?b[g]<<8:b[g]<<8|b[g+1],d.appendCharCode(e<<16-f|h>>>f),e=h&(1<<f)-1,15===f?(d.appendCharCode(e),e=0,f=1):f+=1,g>=c-2&&d.appendCharCode(e<<16-f)}return d.appendCharCode(32768|c%2),d.getOutputString()},b.decode=function(a){if("string"!=typeof a)throw new TypeError("BinaryString.decode: invalid input type");if(""==a)return new Uint8Array(0);for(var b=new Uint8Array(3*a.length),c=0,d=function(a){b[c++]=a>>>8,b[c++]=255&a},e=0,f=0,g=0;g<a.length;g++){var h=a.charCodeAt(g);h>=32768?(32769==h&&c--,f=0):(0==f?e=h:(d(e<<f|h>>>15-f),e=h&(1<<15-f)-1),15==f?f=0:f+=1)}return b.subarray(0,c)}}(c=b.BinaryString||(b.BinaryString={}))}(b=a.Encoding||(a.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(a){var b;!function(a){a.encodeFromString=function(a,b){var c=a.charCodeAt(b);if(c<55296||c>56319)return c;var d=a.charCodeAt(b+1);if(d>=56320&&d<=57343)return 65536+((c-55296<<10)+(d-56320));throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code "+c+", followed by "+d+", which is not a trailing surrogate character code.")},a.decodeToString=function(a){if(a<=65535)return String.fromCharCode(a);if(a<=1114111)return String.fromCharCode(55296+(a-65536>>>10),56320+(a-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of "+a+" cannot be encoded in UTF-16")}}(b=a.CodePoint||(a.CodePoint={}))}(b=a.Encoding||(a.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(a){var b;!function(a){var b=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];a.encode=function(a){for(var c=[],d=0;d<a.length;d++)c.push(b[a[d]]);return c.join(" ")}}(b=a.DecimalString||(a.DecimalString={}))}(b=a.Encoding||(a.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){var b;!function(b){var c;!function(c){var d,e;c.encode=function(b){return b&&0!=b.length?a.runningInNodeJS()?a.BufferTools.bufferToUint8Array(new Buffer(b,"utf8")):c.createNativeTextEncoderAndDecoderIfAvailable()?d.encode(b):c.encodeWithJS(b):new Uint8Array(0)},c.decode=function(b){return b&&0!=b.length?a.runningInNodeJS()?a.BufferTools.uint8ArrayToBuffer(b).toString("utf8"):c.createNativeTextEncoderAndDecoderIfAvailable()?e.decode(b):c.decodeWithJS(b):""},c.encodeWithJS=function(a,c){if(!a||0==a.length)return new Uint8Array(0);c||(c=new Uint8Array(4*a.length));for(var d=0,e=0;e<a.length;e++){var f=b.CodePoint.encodeFromString(a,e);if(f<=127)c[d++]=f;else if(f<=2047)c[d++]=192|f>>>6,c[d++]=128|63&f;else if(f<=65535)c[d++]=224|f>>>12,c[d++]=128|f>>>6&63,c[d++]=128|63&f;else{if(!(f<=1114111))throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)");c[d++]=240|f>>>18,c[d++]=128|f>>>12&63,c[d++]=128|f>>>6&63,c[d++]=128|63&f,e++}}return c.subarray(0,d)},c.decodeWithJS=function(b,c,d){if(void 0===c&&(c=0),!b||0==b.length)return"";void 0===d&&(d=b.length);for(var e,f,g=new a.StringBuilder,h=c,i=d;h<i;){if(f=b[h],f>>>7===0)e=f,h+=1;else if(f>>>5===6){if(h+1>=d)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+h);e=(31&f)<<6|63&b[h+1],h+=2}else if(f>>>4===14){if(h+2>=d)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+h);e=(15&f)<<12|(63&b[h+1])<<6|63&b[h+2],h+=3}else{if(f>>>3!==30)throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+h);if(h+3>=d)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+h);e=(7&f)<<18|(63&b[h+1])<<12|(63&b[h+2])<<6|63&b[h+3],h+=4}g.appendCodePoint(e);
}return g.getOutputString()},c.createNativeTextEncoderAndDecoderIfAvailable=function(){return!!d||"function"==typeof TextEncoder&&(d=new TextEncoder("utf-8"),e=new TextDecoder("utf-8"),!0)}}(c=b.UTF8||(b.UTF8={}))}(b=a.Encoding||(a.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(a){function b(b,c){if(void 0===c&&(c={}),null==b)throw new TypeError("compress: undefined or null input received");var d=a.CompressionCommon.detectCompressionSourceEncoding(b);c=a.ObjectTools.override({inputEncoding:d,outputEncoding:"ByteArray"},c);var e=new a.Compressor,f=e.compressBlock(b);return a.CompressionCommon.encodeCompressedBytes(f,c.outputEncoding)}function c(b,c){if(void 0===c&&(c={}),null==b)throw new TypeError("decompress: undefined or null input received");c=a.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},c);var d=a.CompressionCommon.decodeCompressedBytes(b,c.inputEncoding),e=new a.Decompressor,f=e.decompressBlock(d);return a.CompressionCommon.encodeDecompressedBytes(f,c.outputEncoding)}function d(b,c,d){null==d&&(d=function(){});var e;try{e=a.CompressionCommon.detectCompressionSourceEncoding(b)}catch(a){return void d(void 0,a)}c=a.ObjectTools.override({inputEncoding:e,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},c),a.enqueueImmediate(function(){c.useWebWorker&&a.WebWorker.createGlobalWorkerIfNeeded()?a.WebWorker.compressAsync(b,c,d):a.AsyncCompressor.compressAsync(b,c,d)})}function e(b,c,d){if(null==d&&(d=function(){}),null==b)return void d(void 0,new TypeError("decompressAsync: undefined or null input received"));c=a.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},c);var e=a.BufferTools.convertToUint8ArrayIfNeeded(b);a.EventLoop.enqueueImmediate(function(){c.useWebWorker&&a.WebWorker.createGlobalWorkerIfNeeded()?a.WebWorker.decompressAsync(e,c,d):a.AsyncDecompressor.decompressAsync(b,c,d)})}function f(){return a.AsyncCompressor.createCompressionStream()}function g(){return a.AsyncDecompressor.createDecompressionStream()}function h(b){return a.Encoding.UTF8.encode(b)}function i(b){return a.Encoding.UTF8.decode(b)}function j(b){return a.Encoding.Base64.encode(b)}function k(b){return a.Encoding.Base64.decode(b)}function l(b){return a.Encoding.BinaryString.encode(b)}function m(b){return a.Encoding.BinaryString.decode(b)}a.compress=b,a.decompress=c,a.compressAsync=d,a.decompressAsync=e,a.createCompressionStream=f,a.createDecompressionStream=g,a.encodeUTF8=h,a.decodeUTF8=i,a.encodeBase64=j,a.decodeBase64=k,a.encodeBinaryString=l,a.decodeBinaryString=m}(LZUTF8||(LZUTF8={}));